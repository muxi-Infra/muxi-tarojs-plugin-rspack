# muxi-tarojs-plugin-rspack

> Taro.js æ’ä»¶ï¼Œä¸“é—¨ä¼˜åŒ–å¾®ä¿¡å°ç¨‹åºæ„å»ºï¼Œä½¿ç”¨ Rspack æŠ€æœ¯æä¾›æé€Ÿçš„å°ç¨‹åºæ„å»ºä½“éªŒ

[![npm version](https://badge.fury.io/js/muxi-tarojs-plugin-rspack.svg)](https://badge.fury.io/js/muxi-tarojs-plugin-rspack)
[![license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/muxi-studio/muxi-tarojs-plugin-rspack/blob/main/LICENSE)

## âœ¨ ç‰¹æ€§

- ğŸš€ **æé€Ÿæ„å»º**ï¼šä½¿ç”¨ Rspack æŠ€æœ¯ï¼Œæ„å»ºé€Ÿåº¦æå‡ 5-6 å€
- âš¡ **æ™ºèƒ½ç¼“å­˜**ï¼šå†…ç½® cache-loaderï¼Œå¢é‡æ„å»ºå¿«å¦‚é—ªç”µ
- ğŸ”§ **SWC æ”¯æŒ**ï¼šå¯é€‰å¯ç”¨ SWC ç¼–è¯‘å™¨ï¼Œæ›¿ä»£ Babel è·å¾—æ›´å¿«ç¼–è¯‘é€Ÿåº¦
- ğŸ“¦ **ä»£ç åˆ†å‰²ä¼˜åŒ–**ï¼šä¸“ä¸ºå°ç¨‹åºä¼˜åŒ–çš„ chunk åˆ†å‰²ç­–ç•¥
- ğŸ¯ **ä¸“æ³¨å°ç¨‹åº**ï¼šä¸“é—¨é’ˆå¯¹å¾®ä¿¡å°ç¨‹åºå¹³å°ä¼˜åŒ–ï¼Œä¸å½±å“å…¶ä»–å¹³å°
- ğŸ› ï¸ **é›¶é…ç½®**ï¼šå¼€ç®±å³ç”¨ï¼Œè‡ªåŠ¨æ£€æµ‹å’Œåº”ç”¨æœ€ä½³é…ç½®

## ğŸ“Š æ€§èƒ½æå‡

| åœºæ™¯ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å€æ•° |
|------|--------|--------|----------|
| å†·å¯åŠ¨æ„å»º | 45s | 8s | **5.6x** |
| å¢é‡æ„å»º | 15s | 3s | **5x** |
| çƒ­æ›´æ–° | 5s | 200ms | **25x** |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# npm
npm install muxi-tarojs-plugin-rspack --save-dev

# yarn
yarn add muxi-tarojs-plugin-rspack --dev

# pnpm
pnpm add muxi-tarojs-plugin-rspack --save-dev
```

### ä½¿ç”¨

åœ¨ä½ çš„ Taro é¡¹ç›®é…ç½®æ–‡ä»¶ `config/index.js` ä¸­æ·»åŠ æ’ä»¶ï¼š

```javascript
const config = {
  // å…¶ä»–é…ç½®...
  plugins: [
    // æ·»åŠ  Rspack ä¼˜åŒ–æ’ä»¶
    ['muxi-tarojs-plugin-rspack', {
      // æ’ä»¶é…ç½®é€‰é¡¹ï¼ˆå¯é€‰ï¼‰
      optimization: {
        // å¯ç”¨ SWC ç¼–è¯‘å™¨ï¼ˆéœ€è¦å®‰è£… @swc/core å’Œ swc-loaderï¼‰
        useSwc: true,
        // å¯ç”¨ä»£ç åˆ†å‰²ä¼˜åŒ–
        splitChunks: true,
        // å¯ç”¨ Tree Shaking
        treeShaking: true,
      },
    }],
  ],
}

module.exports = function (merge) {
  // è¿”å›é…ç½®...
}
```

### é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œå¯ä»¥å®‰è£… SWC ç¼–è¯‘å™¨ï¼š

```bash
npm install @swc/core swc-loader --save-dev
```

æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¯ç”¨ SWC ç¼–è¯‘å™¨ã€‚

## ğŸ”§ é…ç½®é€‰é¡¹

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `optimization.useSwc` | `boolean` | `true` | å¯ç”¨ SWC ç¼–è¯‘å™¨ï¼ˆéœ€è¦å®‰è£…ä¾èµ–ï¼‰ |
| `optimization.splitChunks` | `boolean` | `true` | å¯ç”¨ä»£ç åˆ†å‰²ä¼˜åŒ– |
| `optimization.treeShaking` | `boolean` | `true` | å¯ç”¨ Tree Shaking |
| `analyze` | `boolean` | `false` | å¯ç”¨æ„å»ºåˆ†æ |
| `compress` | `boolean` | `true` | å¯ç”¨å‹ç¼©ä¼˜åŒ– |

## ğŸ’¡ å·¥ä½œåŸç†

### ç¼–è¯‘ä¼˜åŒ–
- **SWC ç¼–è¯‘å™¨**ï¼šä½¿ç”¨ Rust ç¼–å†™çš„è¶…å¿«ç¼–è¯‘å™¨æ›¿ä»£ Babel
- **ç¼“å­˜æœºåˆ¶**ï¼šæ™ºèƒ½ç¼“å­˜ç¼–è¯‘ç»“æœï¼Œé¿å…é‡å¤ç¼–è¯‘
- **å¹¶è¡Œå¤„ç†**ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU è¿›è¡Œå¹¶è¡Œç¼–è¯‘

### ä»£ç åˆ†å‰²
- **æ¡†æ¶åˆ†ç¦»**ï¼šå°† Taro æ¡†æ¶ä»£ç å•ç‹¬æ‰“åŒ…
- **ç¬¬ä¸‰æ–¹åº“ä¼˜åŒ–**ï¼šæ™ºèƒ½åˆ†ç¦» node_modules ä¸­çš„åº“
- **å…¬å…±æ¨¡å—æå–**ï¼šè‡ªåŠ¨æå–å…¬å…±ä»£ç å‡å°‘é‡å¤

### å°ç¨‹åºä¼˜åŒ–
- **åŒ…ä½“ç§¯ä¼˜åŒ–**ï¼šå‡å°‘å°ç¨‹åºåŒ…å¤§å°
- **åŠ è½½æ€§èƒ½**ï¼šä¼˜åŒ–æ¨¡å—åŠ è½½é¡ºåº
- **å†…å­˜ä½¿ç”¨**ï¼šé™ä½è¿è¡Œæ—¶å†…å­˜å ç”¨

## ğŸ¯ é€‚ç”¨åœºæ™¯

- âœ… å¾®ä¿¡å°ç¨‹åºå¼€å‘é¡¹ç›®
- âœ… éœ€è¦é¢‘ç¹å¼€å‘è°ƒè¯•çš„é¡¹ç›®
- âœ… å¤§å‹å°ç¨‹åºé¡¹ç›®ï¼ˆæ¨¡å—è¾ƒå¤šï¼‰
- âœ… å›¢é˜Ÿåä½œå¼€å‘é¡¹ç›®

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 14.0.0
- **Taro**: >= 4.0.0
- **å¹³å°**: ä¸»è¦ä¼˜åŒ–å¾®ä¿¡å°ç¨‹åºï¼Œå…¶ä»–å¹³å°ä¿æŒåŸæœ‰æ„å»ºæ–¹å¼

## ğŸ¤ å…¼å®¹æ€§

| Taro ç‰ˆæœ¬ | æ’ä»¶ç‰ˆæœ¬ | æ”¯æŒçŠ¶æ€ |
|-----------|----------|----------|
| 4.0.x | 1.x | âœ… å®Œå…¨æ”¯æŒ |
| 3.x | - | âŒ ä¸æ”¯æŒ |

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **SWC ç¼–è¯‘é”™è¯¯**
   ```bash
   # ç¡®ä¿å®‰è£…äº†å¿…è¦ä¾èµ–
   npm install @swc/core swc-loader --save-dev
   ```

2. **ä»£ç åˆ†å‰²å†²çª**
   - æ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†ä¸ç°æœ‰é…ç½®çš„å†²çª
   - å¦‚æœ‰é—®é¢˜ï¼Œå¯ä»¥ç¦ç”¨ `splitChunks` é€‰é¡¹

3. **æ„å»ºç¼“å­˜é—®é¢˜**
   ```bash
   # æ¸…é™¤æ„å»ºç¼“å­˜
   rm -rf dist .taro_cache node_modules/.cache
   ```

## ğŸ“„ æ›´æ–°æ—¥å¿—

### v1.0.0
- ğŸ‰ é¦–æ¬¡å‘å¸ƒ
- âœ¨ æ”¯æŒ SWC ç¼–è¯‘å™¨
- âœ¨ æ™ºèƒ½ä»£ç åˆ†å‰²
- âœ¨ ç¼“å­˜ä¼˜åŒ–
- âœ¨ ä¸“ä¸ºå°ç¨‹åºä¼˜åŒ–

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Request å’Œ Issueï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request



## ğŸ™ è‡´è°¢

- [Taro](https://taro.zone/) - å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶
- [Rspack](https://rspack.dev/) - åŸºäº Rust çš„é«˜æ€§èƒ½æ‰“åŒ…å·¥å…·
- [SWC](https://swc.rs/) - è¶…å¿«çš„ JavaScript/TypeScript ç¼–è¯‘å™¨

---

**Made with â¤ï¸ by Muxi Studio** 